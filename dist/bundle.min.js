var currentUser;angular.module("app",["ui.router"]),angular.module("app").config(function(t,e){e.when("","/login").when("/user","/user/info").when("/list","/list/all").when("/dprt","/dprt/all"),t.state("user",{"abstract":!0,url:"/user",templateUrl:"templates/navi.html"}).state("list",{url:"/list","abstract":!0,templateUrl:"templates/navi.html"}).state("dprt",{url:"/dprt","abstract":!0,templateUrl:"templates/navi.html"}).state("login",{url:"/login",templateUrl:"templates/login.html"})}),angular.module("app").config(function(t){t.state("dprt.all",{url:"/all",templateUrl:"templates/department/department-all.html"})}),angular.module("app").config(function(t){t.state("dprt.add",{url:"/add",templateUrl:"templates/department/department-add.html"})}),angular.module("app").config(function(t){t.state("list.all",{url:"/all",templateUrl:"templates/list/list-all.html"})}),angular.module("app").config(function(t){t.state("list.dprt",{url:"/dprt",templateUrl:"templates/list/list-department.html"})}),angular.module("app").config(function(t){t.state("list.add",{url:"/add",templateUrl:"templates/list/list-add.html"})}),angular.module("app").config(function(t){t.state("list.recycle",{url:"/recycle",templateUrl:"templates/list/list-recycle.html"})}),angular.module("app").config(function(t){t.state("user.pw",{url:"/pwedit",templateUrl:"templates/user/password-edit.html"})}),angular.module("app").config(function(t){t.state("user.edit",{url:"/infoedit",templateUrl:"templates/user/info-edit.html"})}),angular.module("app").config(function(t){t.state("user.info",{url:"/info",templateUrl:"templates/user/info-detail.html"})}),angular.module("app").service("userService",function(t){return currentUser=null,{login:function(e){return t.post("test/get/user.json",e).success(function(t){t.success&&(currentUser=t,location.href="#/user")})},logout:function(t){return currentUser=null},currentuser:function(){return currentUser}}}),angular.module("app").directive("loginBtn",function(t){return{restrict:"A",link:function(e,l,r){l.bind("click",function(){t.login()})}}}),angular.module("app").directive("logoutBtn",function(t){return{restrict:"A",link:function(e,l,r){l.bind("click",function(){t.logout(),location.href="#/login"})}}});