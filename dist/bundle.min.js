var currentUser;angular.module("app",["ui.router","ngCookies"]),angular.module("app").config(function(t,e){e.when("","/login").when("/user","/user/info").when("/list","/list/all").when("/dprt","/dprt/all"),t.state("user",{"abstract":!0,url:"/user",templateUrl:"templates/navi/navi-user.html"}).state("list",{url:"/list","abstract":!0,templateUrl:"templates/navi/navi-list.html"}).state("dprt",{url:"/dprt","abstract":!0,templateUrl:"templates/navi/navi-dprt.html"}).state("login",{url:"/login",templateUrl:"templates/login.html",controller:function(t,e,l,r){var a={};a.cookie=l.get("userid"),r.login(a),e.update=function(){a.studentNo=e.studentNo,a.password=e.password,r.login(a)}}})}),angular.module("app").config(function(t){t.state("dprt.all",{url:"/all",templateUrl:"templates/department/department-all.html"})}),angular.module("app").config(function(t){t.state("dprt.add",{url:"/add",templateUrl:"templates/department/department-add.html"})}),angular.module("app").config(function(t){t.state("list.all",{url:"/all",templateUrl:"templates/list/list-all.html"})}),angular.module("app").config(function(t){t.state("list.dprt",{url:"/dprt",templateUrl:"templates/list/list-department.html"})}),angular.module("app").config(function(t){t.state("list.add",{url:"/add",templateUrl:"templates/list/list-add.html"})}),angular.module("app").config(function(t){t.state("list.recycle",{url:"/recycle",templateUrl:"templates/list/list-recycle.html"})}),angular.module("app").config(function(t){t.state("user.pw",{url:"/pwedit",templateUrl:"templates/user/password-edit.html"})}),angular.module("app").config(function(t){t.state("user.edit",{url:"/infoedit",templateUrl:"templates/user/info-edit.html"})}),angular.module("app").config(function(t){t.state("user.info",{url:"/info",templateUrl:"templates/user/info-detail.html"})}),angular.module("app").service("userService",function(t,e){return currentUser=null,{login:function(l){var l=l;return t.post("test/get/user.json",l).success(function(t){if(t.success){currentUser=t;var l=new Date;l.setDate(l.getDate()+7);var r=l;e.put("userid",currentUser.account.userid,{expires:r}),location.href="#/user"}})},logout:function(t){e.remove("userid")},currentuser:function(){return currentUser}}}),angular.module("app").directive("loginBtn",function(t){return{restrict:"A",link:function(t,e,l){e.bind("click",function(){})}}}),angular.module("app").directive("logoutBtn",function(t){return{restrict:"A",link:function(e,l,r){l.bind("click",function(){t.logout(),location.href="#/login"})}}});